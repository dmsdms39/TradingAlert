# TradingAlert

> 주식 거래 데이터를 RDB로 관리하면..


> 트래픽이 몰렸을 때 서버 증설..

## 1. 서버 증설이 필요한가?

아마도 지금과 같이 하나의 서버로 구성된 서비스는 밀려오는 수많은 클라이언트들을 단 몇 초도 감당하지 못할 것입니다. 만약 실제로 운영되는 서비스였다면 이는 곧 회사의 금전적인 손실로 연결될 것입니다. 그렇다면 이러한 대규모 트래픽을 처리해야하는 문제를 서버는 어떻게 해결할 수 있을까요?

주식거래 알림 서비스는 주식 시세와 알람을 즉각적으로 처리하도록 **실시간성**, 특정 시간대에 트래픽이 몰리는 **높은 동시 접속**, 사용자의 보유 주식 정보가 잘못되지 않도록 **데이터 정합성** 특징을 갖습니다.

단일 서버로는 폭증하는 트래픽을 처리하기 어려울 뿐 아니라, 서버 장애가 발생하면 **전체 서비스가 중단**될 위험이 큽니다. 따라서 서버 확장은 필수적입니다.

---

## 2. Scale Up vs Scale Out

서버 확장에는 두 가지 방식이 있습니다.

1. **Scale Up**:
    - 더 성능 좋은 하드웨어(CPU, 메모리, SSD 등)로 교체하거나 업그레이드해 **단일 서버**의 처리 능력을 높이는 방식
    - 구현이 단순하지만, 서버 성능 향상에 분명한 물리적·경제적 한계가 있음
    - 장애 발생 시 **단일 서버**에 의존하기 때문에 **고가용성** 측면에서 취약
2. **Scale Out**:
    - **여러 대의 서버**(노드)를 추가해 **수평적 확장**을 하는 방식
    - 트래픽을 여러 노드에 분산할 수 있어 부하 분산과 장애 대비가 용이
    - 데이터 동기화, 로드 밸런서, 여러 서버 관리를 위한 인프라 설계가 복잡
    - **데이터 정합성** 문제를 신중히 고려해야 함(특히 주식 정보처럼 민감한 데이터)

---

## 3. 주식 거래의 주요점

### 3.1 실시간 트래픽과 장애 대비

- 주식거래 알림은 특정 시점(장 시작, 장 마감, 뉴스 발표 등)에 대규모 트래픽이 발생합니다.
- **Scale Up**만으로는 폭발적인 트래픽을 감당하기 어렵고, 서버 장애 시 전 서비스가 마비될 수 있습니다.
- **Scale Out**으로 여러 노드에 트래픽을 분산하는 편이 유리하며, 일부 노드 장애에도 서비스를 이어갈 수 있습니다.

### 3.2 데이터 정합성

- 주식 매매 알림, 보유 종목 정보, 알림 설정 등은 한 번의 잘못된 알림도 **금전적 손실**을 일으킬 수 있습니다.
- **Scale Out** 시 여러 서버가 동일 데이터를 공유해야 하며, 동시에 발생하는 쓰기 작업(주문, 취소 등)을 어떻게 일치시킬지가 관건입니다.
- **세션, 사용자 데이터, 알림 이력** 등을 중앙 저장소(DB)나 세션 스토리지(Redis 등)로 관리하거나, 서버 간 동기화(Replication) 방식을 마련해야 합니다.

### 3.3 구현 및 비용

- **Scale Up**은 하드웨어만 업그레이드하면 되므로 구현이 단순하지만, 고성능 서버는 비용이 매우 비쌀 수 있고, 한 대 서버에 모든 서비스를 의존하는 구조적 한계가 있습니다.
- **Scale Out**은 장비를 여러 대 도입하고 로드 밸런싱·오토 스케일링 등을 설정해야 하므로 초기 설계가 복잡합니다. 그러나 트래픽 증가 시, 노드를 유연하게 늘리는 구조가 가능하고, 특정 노드 장애 시에도 전체 서비스는 유지됩니다.

---

## 4. 어떤 방식이 더 적합할까?

### 4.1 Scale Up

- **장점**:
    - 설계와 구축이 단순
    - 데이터 정합성 문제가 적음(단일 서버에 집중)
    - 추가 인프라(로드밸런서, 모니터링 툴 등)의 비용이 적음
- **단점**:
    - 하드웨어 성능 향상의 한계
    - 장애가 발생하면 전체 서비스가 다운
    - 고성능 장비 비용이 매우 높을 수 있음

### 4.2 Scale Out

- **장점**:
    - 서버 대수를 유연하게 조절 가능
    - 노드 간 부하 분산으로 고가용성 확보
    - 특정 노드 장애 시에도 다른 노드가 서비스를 지속
- **단점**:
    - 시스템 복잡도 증가(로드밸런서·모니터링·데이터 동기화 설계)
    - 서버 간 데이터 정합성 문제(중요 데이터 관리 전략 필요)
    - 무제한 확장이 가능한 것은 아니며, 노드가 많아질수록 운영 부담 증가

---

## 5. 서버 증설 방안 선택

주식 거래 알림 서비스는 **대량 트래픽**과 **높은 신뢰성** 요구사항이 동시에 존재하므로, **Scale Out 방식을 고려하는 것이 일반적으로 더 적합**합니다.

- **로드 밸런서**를 통해 트래픽을 다수의 서버로 분산
- **데이터베이스**나 **인메모리 캐시**(Redis 등)를 통해 중앙에서 중요한 데이터를 일관성 있게 관리
- 노드 장애 대비를 위해 **헬스 체크** 및 **오토 스케일링** 설정
- 성능이 부족할 때는 개별 노드를 **Scale Up**하여 리소스를 조금씩 보강하는 **혼합형 스케일링** 전략도 가능

데이터 무결성이 중요한 금융 서비스이므로 **트랜잭션 처리**와 **데이터 동기화** 메커니즘을 세심하게 구축해야 합니다. 시스템 규모와 예산, 그리고 비즈니스 특성(주로 조회가 많은지, 쓰기 작업이 잦은지)에 맞게 **Scale Up과 Scale Out을 혼합**할 수도 있습니다.

---

### 한 줄 요약

> 주식 거래 알림처럼 대규모 동시성과 높은 가용성을 요구하는 서비스임에 데이터 정합성 문제를 해결할 인프라 설계와 함께, 수평 확장(Scale Out)을 우선 고려함.
>

